
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Scientific Python 1: NumPy &#8212; SWD5: Scientific Python</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://arctraining.github.io/swd5_sc_py/1_numpy.html" />
    <link rel="shortcut icon" href="_static/favicon-32x32.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Files" href="2_matplotlib/3_matplotlib.html" />
    <link rel="prev" title="SWD5: Scientific Python" href="welcome.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">SWD5: Scientific Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    SWD5: Scientific Python
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Scientific Python 1: NumPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2_matplotlib/3_matplotlib.html">
   Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_scipy/3_scipy.html">
   Example : Double integral
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4_pandas/4_intro_pandas.html">
   Introduction to Pandas
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Visit the <a href="https://arcleeds.github.io/">Research Computing Home Site</a> <div> This book is powered by <a href="https://jupyterbook.org">Jupyter Book</a> </div>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ARCTraining/swd5_sc_py"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ARCTraining/swd5_sc_py/issues/new?title=Issue%20on%20page%20%2F1_numpy.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ARCTraining/swd5_sc_py/edit/main/book/1_numpy.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/1_numpy.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basics-of-numpy-arrays">
   Basics of Numpy arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-random-numbers">
   Exercise: Random numbers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indexing-with-other-arrays">
   Indexing with other arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multidimensional-arrays">
   Multidimensional Arrays
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercises-matrix-creation">
     Exercises: Matrix Creation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array-operations">
   Array Operations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercises-array-manipulation">
     Exercises: Array manipulation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#linear-algebra">
   Linear Algebra
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reading-and-writing-data">
   Reading and writing data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#guided-exercise-structured-arrays">
   Guided Exercise: Structured Arrays
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Scientific Python 1: NumPy</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basics-of-numpy-arrays">
   Basics of Numpy arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-random-numbers">
   Exercise: Random numbers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indexing-with-other-arrays">
   Indexing with other arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multidimensional-arrays">
   Multidimensional Arrays
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercises-matrix-creation">
     Exercises: Matrix Creation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array-operations">
   Array Operations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercises-array-manipulation">
     Exercises: Array manipulation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#linear-algebra">
   Linear Algebra
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reading-and-writing-data">
   Reading and writing data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#guided-exercise-structured-arrays">
   Guided Exercise: Structured Arrays
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="scientific-python-1-numpy">
<h1>Scientific Python 1: NumPy<a class="headerlink" href="#scientific-python-1-numpy" title="Permalink to this headline">#</a></h1>
<p>The most fundamental third-party package for scientific computing in Python is NumPy, which provides multidimensional <strong>array</strong> data types, along with a range of functions and methods to manipulate them. Other third-party packages, including Pandas (which we will look at next session), use NumPy arrays as backends for more specialized data structures.</p>
<p>While Python comes with several basic container types (<code class="docutils literal notranslate"><span class="pre">list</span></code>,<code class="docutils literal notranslate"><span class="pre">tuple</span></code>,<code class="docutils literal notranslate"><span class="pre">dict</span></code>), NumPy’s arrays are much more <strong>efficient</strong> than the built-in types. This is particularly true for large data, for which NumPy scales much better than Python’s built-in data structures.</p>
<section id="basics-of-numpy-arrays">
<h2>Basics of Numpy arrays<a class="headerlink" href="#basics-of-numpy-arrays" title="Permalink to this headline">#</a></h2>
<p>Once you have installed numpy, you can import it as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
</pre></div>
</div>
<p>though we will use the conventional shorthand</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>As mentioned above, the main object provided by numpy is a powerful array.  We’ll start by exploring how the numpy array differs from Python lists.  We will start by creating a simple list and an array with the same contents of the list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Here&#39;s what the array looks like</span>
<span class="n">arr</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="p">[</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">arr</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>Elements of a one-dimensional array are indexed with square brackets, as with lists:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>The first difference to note between lists and arrays is that arrays are <strong>homogeneous</strong>; i.e. all elements of an array must be of the same type.  Lists can contain elements of arbitrary type. For example, we can change the last element in our list above to be a string:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a string inside a list&#39;</span>
<span class="n">lst</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>but the same can not be done with an array, as we get an error message:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a string inside an array&#39;</span>
</pre></div>
</div>
<p>The information about the type of an array is contained in its <em>dtype</em> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>
</div>
<p>Once an array has been created, its <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is fixed and it can only store elements of the same type.  For this example where the dtype is integer, if we store a floating point number it will be automatically converted into an integer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.234</span>
<span class="n">arr</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>Above we created an array from an existing list; now let us now see other ways in which we can create arrays, which we’ll illustrate next.  A common need is to have an array initialized with a constant value, and very often this value is 0 or 1 (suitable as starting value for additive and multiplicative loops respectively); <code class="docutils literal notranslate"><span class="pre">zeros</span></code> creates arrays of all zeros, with any desired dtype:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)</span>
</pre></div>
</div>
<p>and similarly for <code class="docutils literal notranslate"><span class="pre">ones</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;5 ones: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<p>If we want an array initialized with an arbitrary value, we can create an empty array and then use the fill method to put the value we want into the array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mf">5.5</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">arange</span></code> function generates an array for a range of integers. Similarly,  the <code class="docutils literal notranslate"><span class="pre">linspace</span></code> and <code class="docutils literal notranslate"><span class="pre">logspace</span></code> functions to create linearly and logarithmically-spaced <strong>grids</strong> respectively, with a fixed number of points and including both ends of the specified interval:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, it is often useful to create arrays with random numbers that follow a specific <strong>distribution</strong>.  The <code class="docutils literal notranslate"><span class="pre">np.random</span></code> module contains a number of functions that can be used to this effect, for example this will produce an array of 5 random samples taken from a <strong>standard normal</strong> distribution (0 mean and variance 1):</p>
<div class="math notranslate nohighlight">
\[f(x \mid \mu=0, \sigma=1) = \sqrt{\frac{1}{2\pi \sigma^2}} \exp\left\{ -\frac{x^2}{2\sigma^2} \right\}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>whereas the following will also give 5 samples, but from a normal distribution with a mean of 9 and a standard deviation of 3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">norm10</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>You can access the documentation for the <code class="docutils literal notranslate"><span class="pre">random</span></code> number generators, or any NumPy  function, using the <code class="docutils literal notranslate"><span class="pre">help</span></code> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">exponential</span><span class="p">)</span>
</pre></div>
</div>
<p>More generally, you can search for NumPy help on a variety of topics, using the <code class="docutils literal notranslate"><span class="pre">lookfor</span></code> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">lookfor</span><span class="p">(</span><span class="s1">&#39;distribution&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="exercise-random-numbers">
<h2>Exercise: Random numbers<a class="headerlink" href="#exercise-random-numbers" title="Permalink to this headline">#</a></h2>
<p>Generate a NumPy array of 1000 random numbers sampled from a Poisson distribution, with parameter <code class="docutils literal notranslate"><span class="pre">lam=5</span></code>. What is the modal value in the sample?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write your answer here</span>
</pre></div>
</div>
</section>
<section id="indexing-with-other-arrays">
<h2>Indexing with other arrays<a class="headerlink" href="#indexing-with-other-arrays" title="Permalink to this headline">#</a></h2>
<p>Above we saw how to index arrays with single numbers and slices, just like Python lists.  But arrays allow for a more sophisticated kind of indexing which is very powerful: you can index an array with another array, and in particular with an array of boolean (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) values.  This is particluarly useful to extract information from an array that matches a certain condition.</p>
<p>Consider for example that in the array <code class="docutils literal notranslate"><span class="pre">norm10</span></code> we want to replace all values above 9 with the value 0.  We can do so by first finding the <em>mask</em> that indicates where this condition is <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">norm10</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="n">norm10</span> <span class="o">&gt;</span> <span class="mi">9</span>
<span class="n">mask</span>
</pre></div>
</div>
<p>Now that we have this mask, we can use it to return those values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">norm10</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>
</div>
<p>or to change their values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">norm10</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">norm10</span>
</pre></div>
</div>
</section>
<section id="multidimensional-arrays">
<h2>Multidimensional Arrays<a class="headerlink" href="#multidimensional-arrays" title="Permalink to this headline">#</a></h2>
<p>NumPy can create arrays of aribtrary dimensions, and all the methods illustrated in the previous section work with more than one dimension. For example, a list of lists can be used to initialize a two dimensional array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">samples_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">632</span><span class="p">,</span> <span class="mi">1638</span><span class="p">,</span> <span class="mi">569</span><span class="p">,</span> <span class="mi">115</span><span class="p">],</span> <span class="p">[</span><span class="mi">433</span><span class="p">,</span><span class="mi">1130</span><span class="p">,</span><span class="mi">754</span><span class="p">,</span><span class="mi">555</span><span class="p">]]</span>
<span class="n">samples_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">samples_list</span><span class="p">)</span>
<span class="n">samples_array</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<p>With two-dimensional arrays we start seeing the convenience of NumPy data structures: while a nested list can be indexed across dimensions using consecutive <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> operators, multidimensional arrays support a more natural indexing syntax with a single set of brackets and a set of comma-separated indices:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">samples_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">samples_array</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Most of the array creation functions listed above can be passed multidimensional shapes. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<p>In fact, an array can be <strong>reshaped</strong> at any time, as long as the total number of elements is unchanged.  For example, if we want a 2x4 array with numbers increasing from 0, the easiest way to create it is via the array’s <code class="docutils literal notranslate"><span class="pre">reshape</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>
</div>
<p>With multidimensional arrays, you can also use slices, and you can mix and match slices and single indices in the different dimensions (using the same array as above):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>If you only provide one index, then you will get the corresponding row.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Now that we have seen how to create arrays with more than one dimension, it’s a good idea to look at some of the most useful <strong>properties and methods</strong> that arrays have.  The following provide basic information about the size, shape and data in the array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Data type                :&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total number of elements :&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of dimensions     :&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape (dimensionality)   :&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Memory used (in bytes)   :&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">nbytes</span><span class="p">)</span>
</pre></div>
</div>
<p>Arrays also have many useful methods, some especially useful ones are:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Minimum and maximum             :&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sum, mean and standard deviation:&#39;</span><span class="p">,</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">samples_array</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</pre></div>
</div>
<p>For these methods, the above operations area all computed on all the elements of the array.  But for a multidimensional array, it’s possible to do the computation along a single dimension, by passing the <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter; for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">samples_array</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">samples_array</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see in this example, the value of the <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter is the dimension which will be <em>consumed</em> once the operation has been carried out.  This is why to sum along the rows we use <code class="docutils literal notranslate"><span class="pre">axis=0</span></code>.</p>
<p>This can be easily illustrated with an example that has more dimensions; we create an array with 4 dimensions and shape <code class="docutils literal notranslate"><span class="pre">(3,4,5,6)</span></code> and sum along the axis index 2.  That consumes the dimension whose length was 5, leaving us with a new array that has shape <code class="docutils literal notranslate"><span class="pre">(3,4,6)</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<p>Another widely used property of arrays is the <code class="docutils literal notranslate"><span class="pre">.T</span></code> attribute, which allows you to access the transpose of the array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">samples_array</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<p>Which is the equivalent of calling NumPy’s <code class="docutils literal notranslate"><span class="pre">transpose</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">samples_array</span><span class="p">)</span>
</pre></div>
</div>
<p>There is a wide variety of methods and properties of arrays.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">samples_array</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<section id="exercises-matrix-creation">
<h3>Exercises: Matrix Creation<a class="headerlink" href="#exercises-matrix-creation" title="Permalink to this headline">#</a></h3>
<p>Generate the following structure as a numpy array, without typing the values by hand. Then, create another array containing just the 2nd and 4th rows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    [[1,  6, 11],
     [2,  7, 12],
     [3,  8, 13],
     [4,  9, 14],
     [5, 10, 15]]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write your answer here</span>
</pre></div>
</div>
<p>Create a <strong>tridiagonal</strong> matrix with 5 rows and columns, with 1’s on the diagonal and 2’s on the off-diagonal.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write your answer here</span>
</pre></div>
</div>
</section>
</section>
<section id="array-operations">
<h2>Array Operations<a class="headerlink" href="#array-operations" title="Permalink to this headline">#</a></h2>
<p>Arrays support all regular arithmetic operators, and NumPy also contains a complete collection of basic mathematical functions that operate on arrays.  It is important to remember that in general, all operations with arrays are applied <strong>element-wise</strong>, that is, applied to each element of the array.</p>
<p>Consider for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample1</span><span class="p">,</span> <span class="n">sample2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">632</span><span class="p">,</span> <span class="mi">1638</span><span class="p">,</span> <span class="mi">569</span><span class="p">,</span> <span class="mi">115</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">433</span><span class="p">,</span><span class="mi">1130</span><span class="p">,</span><span class="mi">754</span><span class="p">,</span><span class="mi">555</span><span class="p">])</span>
<span class="n">sample_sum</span> <span class="o">=</span> <span class="n">sample1</span> <span class="o">+</span> <span class="n">sample2</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> + </span><span class="si">{1}</span><span class="s1"> = </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sample1</span><span class="p">,</span> <span class="n">sample2</span><span class="p">,</span> <span class="n">sample_sum</span><span class="p">))</span>
</pre></div>
</div>
<p>This includes the multiplication operator – it does <em>not</em> perform matrix multiplication, as is the case in Matlab, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> X </span><span class="si">{1}</span><span class="s1"> = </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sample1</span><span class="p">,</span> <span class="n">sample2</span><span class="p">,</span> <span class="n">sample1</span><span class="o">*</span><span class="n">sample2</span><span class="p">))</span>
</pre></div>
</div>
<p>While this implies that the dimension of the arrays for each operation must match in size, numpy will <strong>broadcast</strong> dimensions when possible.  For example, suppose that you want to add the number 1.5 to each element <code class="docutils literal notranslate"><span class="pre">arr1</span></code>. One approach is to use the <code class="docutils literal notranslate"><span class="pre">ones</span></code> function to match the dimension of the array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample1</span> <span class="o">+</span> <span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>But thanks to numpy’s broadcasting rules, the following is equally valid:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample1</span> <span class="o">+</span> <span class="mf">1.5</span>
</pre></div>
</div>
<p>In this case, numpy looked at both operands and saw that the first was a one-dimensional array of length 4 and the second was a scalar, considered a zero-dimensional object. The broadcasting rules allow numpy to:</p>
<ul class="simple">
<li><p><em>create</em> new array of length 1</p></li>
<li><p><em>extend</em> the array to match the size of the corresponding array</p></li>
</ul>
<p>So in the above example, the scalar 1.5 is effectively cast to a 1-dimensional array of length 1, then stretched to length 4 to match the dimension of <code class="docutils literal notranslate"><span class="pre">arr1</span></code>. After this, element-wise addition can proceed as now both operands are one-dimensional arrays of length 4.</p>
<p>This broadcasting behavior is powerful, especially because when NumPy broadcasts to create new dimensions or to stretch existing ones, it doesn’t actually replicate the data.  In the example above the operation is carried <em>as if</em> the 1.5 was a 1-d array with 1.5 in all of its entries, but no actual array was ever created.  This saves memory and improves the <strong>performance</strong> of operations.</p>
<p>When broadcasting, NumPy compares the sizes of each dimension in each operand. It starts with the trailing dimensions, working forward and creating dimensions as needed to accomodate the operation. Two dimensions are considered compatible for operation when:</p>
<ul class="simple">
<li><p>they are equal in size</p></li>
<li><p>one is scalar (or size 1)</p></li>
</ul>
<p>If these conditions are not met, an exception is thrown, indicating that the arrays have incompatible shapes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
</pre></div>
</div>
<p>Let’s create a 1-dimensional array and add it to a 2-dimensional array, to illustrate broadcasting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">])</span>
<span class="n">bcast_sum</span> <span class="o">=</span> <span class="n">sample1</span> <span class="o">+</span> <span class="n">b</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="se">\n\n</span><span class="s1">+ </span><span class="si">{1}</span><span class="se">\n</span><span class="si">{2}</span><span class="se">\n</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sample1</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">21</span><span class="p">,</span> <span class="n">bcast_sum</span><span class="p">))</span>
</pre></div>
</div>
<p>What if we wanted to add <code class="docutils literal notranslate"><span class="pre">[-100,</span> <span class="pre">100]</span></code> to the rows of <code class="docutils literal notranslate"><span class="pre">sample1</span></code>?  Direct addition will not work:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">sample1</span> <span class="o">+</span> <span class="n">c</span>
</pre></div>
</div>
<p>Remember that matching begins at the <strong>trailing</strong> dimensions. Here, <code class="docutils literal notranslate"><span class="pre">c</span></code> would need to have a trailing dimension of 1 for the broadcasting to work.  We can augment arrays with dimensions on the fly, by indexing it with a <code class="docutils literal notranslate"><span class="pre">np.newaxis</span></code> object, which adds an “empty” dimension:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cplus</span> <span class="o">=</span> <span class="n">c</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">cplus</span>
</pre></div>
</div>
<p>This is exactly what we need, and indeed it works:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample1</span> <span class="o">+</span> <span class="n">cplus</span>
</pre></div>
</div>
<p>For the full broadcasting rules, please see the official Numpy docs, which describe them in detail and with more complex examples.</p>
<section id="exercises-array-manipulation">
<h3>Exercises: Array manipulation<a class="headerlink" href="#exercises-array-manipulation" title="Permalink to this headline">#</a></h3>
<p>Divide each column of the array:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    np.array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])
</pre></div>
</div>
<p>elementwise with the array <code class="docutils literal notranslate"><span class="pre">np.array([1.,</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">15,</span> <span class="pre">20])</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write your answer here</span>
</pre></div>
</div>
<p>Generate a 10 x 3 array of random numbers (in range [0,1]). For each row, pick the number closest to 0.5.</p>
<p><em>Hints</em>:</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">abs</span></code> and <code class="docutils literal notranslate"><span class="pre">argsort</span></code> to find the column <code class="docutils literal notranslate"><span class="pre">j</span></code> closest for each row.</p></li>
<li><p>Use “fancy” indexing to extract the numbers.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write your answer here</span>
</pre></div>
</div>
</section>
</section>
<section id="linear-algebra">
<h2>Linear Algebra<a class="headerlink" href="#linear-algebra" title="Permalink to this headline">#</a></h2>
<p>Numpy includes a linear algebra submodule, along with a suite of <code class="docutils literal notranslate"><span class="pre">array</span></code> methods for performing linear algebra. For example, the <code class="docutils literal notranslate"><span class="pre">dot</span></code> method performs an inner (dot) product on vectors and matrices:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">v1</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>
</pre></div>
</div>
<p>Equivalently, we can use the <code class="docutils literal notranslate"><span class="pre">dot</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
</pre></div>
</div>
<p>When performing regular matrix-vector multiplication, note that NumPy makes no distinction between row and column vectors <em>per se</em> and simply verifies that the dimensions match the required rules of matrix multiplication, in this case we have a <span class="math notranslate nohighlight">\(2 \times 3\)</span> matrix multiplied by a 3-vector, which produces a 2-vector:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
<p>For matrix-matrix multiplication, the same dimension-matching rules must be satisfied, e.g. consider the difference between <span class="math notranslate nohighlight">\(A \times A^T\)</span>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<p>and <span class="math notranslate nohighlight">\(A^T \times A\)</span>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>Beyond inner products, the <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code> module includes functions for calculating determinants, matrix norms, Cholesky decomposition, eigenvalue and singular value decompositions, and more.</p>
<p>Additional linear algebra tools are available in SciPy’s linear algebra library, <code class="docutils literal notranslate"><span class="pre">scipy.linalg</span></code>. It includes the majority of the tools in the classic LAPACK libraries as well as functions to operate on sparse matrices.</p>
</section>
<section id="reading-and-writing-data">
<h2>Reading and writing data<a class="headerlink" href="#reading-and-writing-data" title="Permalink to this headline">#</a></h2>
<p>NumPy lets you save and retrive data structures to and from files on a local or remote storage, in either <strong>text</strong> or <strong>binary</strong> formats. Which format is appropriate depends on which tradeoff that you are willing to make:</p>
<ul class="simple">
<li><p><strong>Text mode</strong>: occupies more space, precision can be lost (if not all digits are written to disk), but is readable and editable by hand with a text editor.  Storage is limited to one- and two-dimensional arrays.</p></li>
<li><p><strong>Binary mode</strong>: compact and exact representation of the data in memory, can’t be read or edited by hand.  Arrays of any size and dimensionality can be saved and read without loss of information.</p></li>
</ul>
<p>First, let’s see how to read and write arrays in text mode.  The <code class="docutils literal notranslate"><span class="pre">np.savetxt</span></code> function saves an array to a text file, with options to control the precision, separators and even adding a header:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s1">&#39;test.out&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.2e</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s2">&quot;My dataset&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>!cat test.out
</pre></div>
</div>
<p>And this same type of file can then be read with the matching <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;test.out&#39;</span><span class="p">)</span>
<span class="n">arr2</span>
</pre></div>
</div>
<p>For binary data, we use either <code class="docutils literal notranslate"><span class="pre">np.save</span></code> or <code class="docutils literal notranslate"><span class="pre">np.savez</span></code>.  The first saves a single array to a file with <code class="docutils literal notranslate"><span class="pre">.npy</span></code> extension, while the latter can be used to save a <em>group</em> of arrays into a single file with <code class="docutils literal notranslate"><span class="pre">.npz</span></code> extension.  The files created with these routines can then be read with the <code class="docutils literal notranslate"><span class="pre">np.load</span></code> function.</p>
<p>Let us first see how to use the simpler <code class="docutils literal notranslate"><span class="pre">np.save</span></code> function to save a single array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;test.npy&#39;</span><span class="p">,</span> <span class="n">arr2</span><span class="p">)</span>
</pre></div>
</div>
<p>This can be read back:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr2n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;test.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And we can confirm that they are equal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">arr2</span> <span class="o">-</span> <span class="n">arr2n</span><span class="p">)</span>
</pre></div>
</div>
<p>Now let us see how the <code class="docutils literal notranslate"><span class="pre">np.savez</span></code> function works.</p>
<p>It expects both a filename and either a sequence of arrays or a set of key-value pairs.  If arrays are passed, the <code class="docutils literal notranslate"><span class="pre">savez</span></code> will automatically name the saved arrays in the archive as <code class="docutils literal notranslate"><span class="pre">arr_0</span></code>, <code class="docutils literal notranslate"><span class="pre">arr_1</span></code>, …</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s1">&#39;test.npz&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">arr2</span><span class="p">)</span>
<span class="n">arrays</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;test.npz&#39;</span><span class="p">)</span>
<span class="n">arrays</span><span class="o">.</span><span class="n">files</span>
</pre></div>
</div>
<p>Alternatively, if we explicitly name the arrays using keyword arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s1">&#39;test.npz&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="n">arr2</span><span class="p">)</span>
<span class="n">arrays</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;test.npz&#39;</span><span class="p">)</span>
<span class="n">arrays</span><span class="o">.</span><span class="n">files</span>
</pre></div>
</div>
<p>The object returned by <code class="docutils literal notranslate"><span class="pre">np.load</span></code> from an <code class="docutils literal notranslate"><span class="pre">.npz</span></code> file works like a dictionary, though you can also access its constituent files by attribute using its special <code class="docutils literal notranslate"><span class="pre">.f</span></code> field; this is best illustrated with an example with the <code class="docutils literal notranslate"><span class="pre">arrays</span></code> object from above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># First row of array</span>
<span class="n">arrays</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Equivalently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arrays</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">bar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">.npz</span></code> format is a very convenient way to package compactly and without loss of information, into a single file, a group of related arrays that pertain to a specific problem.  At some point, however, the complexity of your dataset may be such that the optimal approach is to use one of the standard formats in scientific data processing that have been designed to handle complex datasets, such as NetCDF or HDF5.</p>
</section>
<section id="guided-exercise-structured-arrays">
<h2>Guided Exercise: Structured Arrays<a class="headerlink" href="#guided-exercise-structured-arrays" title="Permalink to this headline">#</a></h2>
<p>Import the <code class="docutils literal notranslate"><span class="pre">microbiome.csv</span></code> dataset in the <code class="docutils literal notranslate"><span class="pre">data/microbiome</span></code> directory using NumPy’s <code class="docutils literal notranslate"><span class="pre">loadtxt</span></code> function. This will take some experimentation; use the built-in help to get hints!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write answer here</span>
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="welcome.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">SWD5: Scientific Python</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="2_matplotlib/3_matplotlib.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Files</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By University of Leeds Research Computing Team<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>